<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="websocket-example.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>OKX Trading Dashboard</title>
</head>

<body>
    <div class="container">
        <h2>ğŸš€ OKX Trading Dashboard</h2>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>ğŸ†• Fitur Baru!</strong> Volume Ratio % sekarang tersedia! Coba sorting by "ğŸ“Š Vol Ratio % (2h)"
            untuk melihat rasio Buy vs Sell dalam skala persentase.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <label class="form-label">ğŸ” Filter by Coin (per-tab)</label>
                <div id="filterContainer">
                    <input type="text" class="form-control filter-input" id="coinFilter_summary"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_volume"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_volDur"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_spikes"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_recs"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_alerts"
                        placeholder="e.g., BTC, ETH">
                    <input type="text" class="form-control filter-input d-none" id="coinFilter_micro"
                        placeholder="e.g., BTC, ETH">
                </div>
            </div>
            <div class="col-md-4">
                <label for="limitInput" class="form-label">ğŸ“Š Limit Rows</label>
                <input type="number" class="form-control" id="limitInput" placeholder="Enter row limit" min="1"
                    value="5">
            </div>
            <div class="col-md-4 d-flex align-items-end">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="persistHistoryToggle" checked>
                    <label class="form-check-label" for="persistHistoryToggle">ğŸ’¾ Persist History (LocalStorage)</label>
                </div>
            </div>
            <div class="col-md-4 d-flex align-items-end">
                <div>
                    <small class="text-muted">ğŸ”” Alerts configurable in the <strong>Alerts</strong> tab.</small>
                </div>
            </div>
            <div class="col-md-4">
                <label for="sortBy" class="form-label">ğŸ“Š Sort By <span class="badge bg-success">NEW: Vol Ratio
                        %</span></label>
                <div class="form-text small text-muted">Note: feed no longer provides separate per-trade counts â€”
                    "Activity" sorts use volume as a proxy.</div>
                <select class="form-select" id="sortBy">
                    <optgroup label="ğŸ”¥ Flow Pressure (Vol Ratio)">
                        <option value="vol_ratio_1m">ğŸ“Š Vol Ratio % (1m) - Ultra short-term flow</option>
                        <option value="vol_ratio_5m">ğŸ“Š Vol Ratio % (5m) - Micro bursts</option>
                        <option value="vol_ratio_10m">ğŸ“Š Vol Ratio % (10m) - Short swings</option>
                        <option value="vol_ratio_15m">ğŸ“Š Vol Ratio % (15m) - Session scout</option>
                        <option value="vol_ratio_20m">ğŸ“Š Vol Ratio % (20m) - Pre-breakout check</option>
                        <option value="vol_ratio_30m">ğŸ“Š Vol Ratio % (30m) - Intraday pulse</option>
                        <option value="vol_ratio_1h">ğŸ“Š Vol Ratio % (1h) - Hourly trend</option>
                        <option value="vol_ratio">ğŸ“Š Vol Ratio % (2h) - BUY/SELL Pressure â­</option>
                        <option value="vol_ratio_24h">ğŸ“Š Vol Ratio % (24h) - Macro bias</option>
                    </optgroup>
                    <optgroup label="ğŸ“ˆ Durability">
                        <option value="vol_durability">âš–ï¸ Vol Durability Score (2h)</option>
                        <option value="activity_dur_2h">% Activity Durability (2h, vol proxy)</option>
                    </optgroup>
                    <optgroup label="ğŸ’° Price & Change">
                        <option value="change">% Change</option>
                        <option value="price">Price</option>
                        <option value="price_position" selected>Price Position (0-100)</option>
                        <option value="recommendation">Recommendation Score</option>
                    </optgroup>


                    <optgroup label="ğŸ’¥ Volume (1m)">
                        <option value="vol_buy_1m">Vol Buy (1m)</option>
                        <option value="vol_sell_1m">Vol Sell (1m)</option>
                        <option value="vol_total_1m">Vol Total (1m)</option>
                        <option value="avg_vol_buy_1m">Avg Vol Buy (1m)</option>
                        <option value="avg_vol_sell_1m">Avg Vol Sell (1m)</option>
                    </optgroup>

                    <optgroup label="ğŸ’¹ Volume (5m)">
                        <option value="vol_buy_5m">Vol Buy (5m)</option>
                        <option value="vol_sell_5m">Vol Sell (5m)</option>
                        <option value="vol_total_5m">Vol Total (5m)</option>
                        <option value="avg_vol_buy_5m">Avg Vol Buy (5m)</option>
                        <option value="avg_vol_sell_5m">Avg Vol Sell (5m)</option>
                    </optgroup>

                    <optgroup label="ğŸ’¹ Volume (10m)">
                        <option value="vol_buy_10m">Vol Buy (10m)</option>
                        <option value="vol_sell_10m">Vol Sell (10m)</option>
                        <option value="vol_total_10m">Vol Total (10m)</option>
                        <option value="avg_vol_buy_10m">Avg Vol Buy (10m)</option>
                        <option value="avg_vol_sell_10m">Avg Vol Sell (10m)</option>
                    </optgroup>


                    <optgroup label="ğŸ’¹ Volume (15m)">
                        <option value="vol_buy_15m">Vol Buy (15m)</option>
                        <option value="vol_sell_15m">Vol Sell (15m)</option>
                        <option value="vol_total_15m">Vol Total (15m)</option>
                        <option value="avg_vol_buy_15m">Avg Vol Buy (15m)</option>
                        <option value="avg_vol_sell_15m">Avg Vol Sell (15m)</option>
                    </optgroup>


                    <optgroup label="ğŸ’¹ Volume (20m)">
                        <option value="vol_buy_20m">Vol Buy (20m)</option>
                        <option value="vol_sell_20m">Vol Sell (20m)</option>
                        <option value="vol_total_20m">Vol Total (20m)</option>
                        <option value="avg_vol_buy_20m">Avg Vol Buy (20m)</option>
                        <option value="avg_vol_sell_20m">Avg Vol Sell (20m)</option>
                    </optgroup>


                    <optgroup label="ğŸ’° Volume (30m)">
                        <option value="vol_buy_30m">Vol Buy (30m)</option>
                        <option value="vol_sell_30m">Vol Sell (30m)</option>
                        <option value="vol_total_30m">Vol Total (30m)</option>
                        <option value="avg_vol_buy_30m">Avg Vol Buy (30m)</option>
                        <option value="avg_vol_sell_30m">Avg Vol Sell (30m)</option>
                    </optgroup>


                    <optgroup label="ğŸ“Š Volume (1h)">
                        <option value="vol_buy_1h">Vol Buy (1h)</option>
                        <option value="vol_sell_1h">Vol Sell (1h)</option>
                        <option value="vol_total_1h">Vol Total (1h)</option>
                        <option value="avg_vol_buy_1h">Avg Vol Buy (1h)</option>
                        <option value="avg_vol_sell_1h">Avg Vol Sell (1h)</option>
                    </optgroup>


                    <optgroup label="ğŸ“ˆ Volume (2h)">
                        <option value="vol_buy_2h">Vol Buy (2h)</option>
                        <option value="vol_sell_2h">Vol Sell (2h)</option>
                        <option value="vol_total_2h">Vol Total (2h)</option>
                        <option value="avg_vol_buy_2h">Avg Vol Buy (2h)</option>
                        <option value="avg_vol_sell_2h">Avg Vol Sell (2h)</option>
                    </optgroup>
                    <optgroup label="ğŸ“Š Sum Durability">
                        <option value="sum_min_1_buy">Sum Min 1 Buy</option>
                        <option value="sum_min_5_buy">Sum Min 5 Buy</option>
                        <option value="sum_min_10_buy">Sum Min 10 Buy</option>
                        <option value="sum_min_15_buy">Sum Min 15 Buy</option>
                        <option value="sum_min_20_buy">Sum Min 20 Buy</option>
                        <option value="sum_min_30_buy">Sum Min 30 Buy</option>
                        <option value="sum_min_60_buy">Sum Min 60 Buy</option>
                        <option value="sum_min_120_buy">Sum Min 120 Buy</option>
                        <option value="sum_overall_buy">Sum Overall Buy</option>
                    </optgroup>
                    <option value="risk_score">âš–ï¸ Risk Score</option>
                    <optgroup label="ğŸ’° Volume Durability">
                        <option value="vol_durability_1m">âš–ï¸ Vol Durability (1m)</option>
                        <option value="vol_durability_5m">âš–ï¸ Vol Durability (5m)</option>
                        <option value="vol_durability_10m">âš–ï¸ Vol Durability (10m)</option>
                        <option value="vol_durability_15m">âš–ï¸ Vol Durability (15m)</option>
                        <option value="vol_durability_20m">âš–ï¸ Vol Durability (20m)</option>
                        <option value="vol_durability_30m">âš–ï¸ Vol Durability (30m)</option>
                        <option value="vol_durability_60m">âš–ï¸ Vol Durability (60m)</option>
                        <option value="vol_durability">âš–ï¸ Vol Durability (120m)</option>
                        <option value="vol_durability_24h">âš–ï¸ Vol Durability (24h)</option>
                    </optgroup>
                    <optgroup label="ğŸ“ˆ Change Variations">
                        <option disabled class="text-muted">Detailed change metrics not available from feed</option>
                    </optgroup>
                    <optgroup label="â° Update Times">
                        <option value="update_activity">Update Time Activity</option>
                        <option value="update_sum">Update Time Sum</option>
                        <option value="update_general">Update Time General</option>
                    </optgroup>
                    <optgroup label="ğŸ’µ Total Volumes">
                        <option value="total_vol_fiat">Total Vol Fiat</option>
                        <option value="total_vol">Total Volume</option>
                    </optgroup>
                    <optgroup label="âš¡ Delay">
                        <option value="delay_ms">Delay MS</option>
                    </optgroup>
                    <optgroup label="ğŸŒŸ Overall (24h)">
                        <option value="activity_dur_24h">% Activity Durability (24h, vol proxy)</option>
                        <option value="vol_dur_24h">% Vol Durability (24h)</option>
                        <option value="vol_buy_24h">Vol Buy (24h)</option>
                        <option value="vol_sell_24h">Vol Sell (24h)</option>
                        <option value="vol_total_24h">Vol Total (24h)</option>
                    </optgroup>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">ğŸ“ˆ Sort Order</label>
                <div id="sortOrder" class="d-flex gap-2 align-items-center">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="sortOrderRad" id="sortOrder_desc"
                            value="desc" checked>
                        <label class="form-check-label small" for="sortOrder_desc">Descending â¬‡ï¸</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="sortOrderRad" id="sortOrder_asc" value="asc">
                        <label class="form-check-label small" for="sortOrder_asc">Ascending â¬†ï¸</label>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="d-flex flex-wrap align-items-center gap-2">
                        <button type="button" class="btn btn-sm btn-outline-warning text-dark" id="openAdvancedSortBtn"
                            data-bs-toggle="modal" data-bs-target="#advancedSortModal">âš™ï¸ Advanced Sort & Filter</button>
                        <span id="advancedSortStatus" class="badge bg-secondary">OFF</span>
                        <button type="button" class="btn btn-sm btn-outline-light d-none" id="disableAdvancedSortBtn">
                            âœ– Disable
                        </button>
                    </div>
                    <small id="advancedSortHint" class="text-white-50">Pilih beberapa kategori untuk prioritas
                        sorting + filter tambahan.</small>
                </div>
            </div>
        </div>

        <div id="loading" class="loading">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p>Connecting to WebSocket...</p>
        </div>

        <ul class="nav nav-tabs" id="dataTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary"
                    type="button" role="tab">ğŸ“Š Summary</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="volume-tab" data-bs-toggle="tab" data-bs-target="#volume" type="button"
                    role="tab">ğŸ“Š Volume</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="volratio-tab" data-bs-toggle="tab" data-bs-target="#volRatio" type="button"
                    role="tab">ğŸ“ˆ Vol Ratio</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="vol-dur-tab" data-bs-toggle="tab" data-bs-target="#volDur" type="button"
                    role="tab">ğŸ“ˆ Vol Dur</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="micro-tab" data-bs-toggle="tab" data-bs-target="#microstructure" type="button"
                    role="tab">ğŸ§  Microstructure</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="insight-tab" data-bs-toggle="tab" data-bs-target="#insight" type="button"
                    role="tab">ğŸ” Insight</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button"
                    role="tab">â„¹ï¸ Info</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="alerts-tab" data-bs-toggle="tab" data-bs-target="#alerts" type="button"
                    role="tab">ğŸ”” Alerts</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="recs-tab" data-bs-toggle="tab" data-bs-target="#recommendations"
                    type="button" role="tab">ğŸ§­ Recs</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="signal-tab" data-bs-toggle="tab" data-bs-target="#signalLab" type="button"
                    role="tab">ğŸ§ª Signal Lab</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="backtest-tab" data-bs-toggle="tab" data-bs-target="#backtest" type="button"
                    role="tab">ğŸ§® Backtest</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="risk-tab" data-bs-toggle="tab" data-bs-target="#risk" type="button"
                    role="tab">âš ï¸ Risk</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="events-tab" data-bs-toggle="tab" data-bs-target="#events" type="button"
                    role="tab">ğŸ“… Events</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="spike-tab" data-bs-toggle="tab" data-bs-target="#spikes" type="button"
                    role="tab">âš¡ Spikes</button>
            </li>
        </ul>

        <div class="row mb-3">
            <div class="col-12">
                <div class="d-flex justify-content-center">
                    <button class="btn btn-outline-success me-2" onclick="quickSort('vol_ratio')">
                        ğŸš€ Quick Sort: Vol Ratio %
                    </button>
                    <button class="btn btn-outline-info" onclick="showVolRatioInfo()">
                        ğŸ“š Learn About Vol Ratio %
                    </button>
                </div>
            </div>
        </div>



        <div class="tab-content mt-4" id="dataTabsContent">
            <div class="tab-pane fade show active" id="summary" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="summaryTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>ğŸ’° Price</th>
                                <th>ğŸ“Š Change %</th>
                                <th>ğŸ“ Price Pos</th>
                                <th>ğŸ¯ Recommendation</th>
                                <th>âš–ï¸ Risk</th>
                                <th>ğŸ“Š Vol Ratio % (2h)</th>
                                <th>ğŸ“Š Vol Buy (2h)</th>
                                <th>ğŸ“Š Vol Sell (2h)</th>
                                <th>âš–ï¸ Vol Dur (2h)</th>
                                <th>ğŸ“Š Vol Buy (24h)</th>
                                <th>ğŸ“Š Vol Sell (24h)</th>
                                <th>â° Update</th>
                            </tr>
                        </thead>
                        <tbody id="summaryBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Activity tab removed: feed only provides volume-based metrics now -->

            <div class="tab-pane fade" id="volume" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="volTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>ğŸ“Š Buy 1m</th>
                                <th>ğŸ“Š Sell 1m</th>
                                <th>ğŸ“Š Buy 5m</th>
                                <th>ğŸ“Š Sell 5m</th>
                                <th>ğŸ“Š Buy 10m</th>
                                <th>ğŸ“Š Sell 10m</th>
                                <th>ğŸ“Š Buy 15m</th>
                                <th>ğŸ“Š Sell 15m</th>
                                <th>ğŸ“Š Buy 20m</th>
                                <th>ğŸ“Š Sell 20m</th>
                                <th>ğŸ“Š Buy 30m</th>
                                <th>ğŸ“Š Sell 30m</th>
                                <th>ğŸ“Š Buy 60m</th>
                                <th>ğŸ“Š Sell 60m</th>
                                <th>ğŸ“Š Buy 120m</th>
                                <th>ğŸ“Š Sell 120m</th>
                                <th>ğŸ“Š Ratio %</th>
                                <th>ğŸ“Š Buy (24h)</th>
                                <th>ğŸ“Š Sell (24h)</th>
                                <th>ğŸ“Š Total (24h)</th>
                            </tr>
                        </thead>
                        <tbody id="volBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="volRatio" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="volRatioTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>1m</th>
                                <th>5m</th>
                                <th>10m</th>
                                <th>15m</th>
                                <th>20m</th>
                                <th>30m</th>
                                <th>1h</th>
                                <th>2h</th>
                                <th>24h</th>
                                <th>Last Change %</th>
                            </tr>
                        </thead>
                        <tbody id="volRatioBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="volDur" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="volDurTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>ğŸ“Š Change %</th>
                                <th>1m</th>
                                <th>5m</th>
                                <th>10m</th>
                                <th>15m</th>
                                <th>20m</th>
                                <th>30m</th>
                                <th>1h</th>
                                <th>24h</th>
                            </tr>
                        </thead>
                        <tbody id="volDurBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="microstructure" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="microTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>Cohesion</th>
                                <th>Acc Vol</th>
                                <th>FBI</th>
                                <th>OFSI</th>
                                <th>FSI</th>
                                <th>Z-Press</th>
                                <th>TIM</th>
                                <th>CIS</th>
                                <th>LSI</th>
                                <th>Range Comp</th>
                                <th>PFCI</th>
                            </tr>
                        </thead>
                        <tbody id="microBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade" id="insight" role="tabpanel">
                <div class="row">
                    <div class="col-12">
                        <div id="insightPane">
                            <h4 class="text-info">ğŸ” Insight</h4>
                            <div id="insightPaneBody" class="card bg-dark text-light p-3">
                                <p class="text-muted">Select a coin from the Summary tab to see detailed insights here.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="info" role="tabpanel">
                <div id="infoRuntime" class="mb-3"></div>
                <div class="card bg-dark text-light mb-3">
                    <div class="card-body">
                        <h5 class="text-info">âœ¨ Fitur Tersedia / Available Features</h5>
                        <ul class="small mb-2">
                            <li><strong>Live feed:</strong> WebSocket client + Redis bridge (subscribe â†’ wss) untuk data
                                real-time.</li>
                            <li><strong>Summary:</strong> Tabel ringkasan per-coin, klik baris untuk membuka Insight.
                            </li>
                            <li><strong>Recommendations (Recs):</strong> Per-timeframe (1m/5m/10m/30m/60m/120m/24h) dan
                                opsi <em>All</em> (konsensus antar-timeframe).</li>
                            <li><strong>TP/SL Controls:</strong> Atur TP% min/max, SL% max, dan sensitivitas; opsi
                                ATR-based TP/SL tersedia.</li>
                            <li><strong>Volume & Vol Dur:</strong> Lihat buy/sell volume multi-timeframe dan durability
                                metrics.</li>
                            <li><strong>Spike Detection:</strong> Deteksi lonjakan volume vs rata-rata per-timeframe.
                            </li>
                            <li><strong>Alerts:</strong> Banner alerts, webhook test, sound toggle, dan mode compact
                                untuk membatasi tampilan.</li>
                            <li><strong>Insight Export:</strong> Export data coin ke JSON/CSV dari modal Insight.</li>
                            <li><strong>UI behavior:</strong> Debounced updates, delegated row clicks, and deterministic
                                recommendations (sorting/preview do not mutate state).</li>
                            <li><strong>Local Dev:</strong> Docker Compose included â€” runs Redis + example services
                                (bridge/publisher/aggregator/count/generateavg). GenerateAvg scheduled in compose for
                                periodic averages.</li>
                        </ul>
                        <p class="small text-white-50 mb-0">Tip singkat: gunakan tab <strong>Recs</strong> untuk memilih
                            timeframe lalu periksa Summary agar nilainya konsisten. Untuk reproducibility, consider
                            moving heavy analytics server-side.</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <h4 class="text-info mb-3">ğŸ“Š <strong>Summary Tab - Kolom Utama</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <div class="d-flex gap-2 mb-3 align-items-center">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="compactAlertsToggle">
                                        <label class="form-check-label small" for="compactAlertsToggle">Compact banners
                                            (limit visible alerts)</label>
                                    </div>
                                    <div class="input-group input-group-sm" style="width:140px;">
                                        <span class="input-group-text">Max</span>
                                        <input type="number" id="maxAlertBanners" class="form-control" value="3"
                                            min="0">
                                    </div>
                                    <div>
                                        <button id="showHiddenAlertsBtn" class="btn btn-sm btn-outline-secondary">Show
                                            hidden alerts</button>
                                    </div>
                                </div>
                                <h6 class="card-title text-warning">Coin</h6>
                                <p class="card-text small">Nama cryptocurrency (BTC, ETH, dll)</p>

                                <h6 class="card-title text-warning">ğŸ’° Price</h6>
                                <p class="card-text small">Harga terakhir dalam USD</p>

                                <h6 class="card-title text-warning">ğŸ“Š Change %</h6>
                                <p class="card-text small">Persentase perubahan harga dalam periode terakhir</p>

                                <h6 class="card-title text-warning">ğŸ“ Price Pos</h6>
                                <p class="card-text small">Posisi harga dalam range High-Low (0-100). 0 = di Low, 100 =
                                    di High</p>

                                <h6 class="card-title text-warning">ğŸ¯ Recommendation</h6>
                                <p class="card-text small">Rekomendasi BUY/SELL/HOLD berdasarkan algoritma AI dengan
                                    tingkat confidence</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <h4 class="text-info mb-3">âš–ï¸ <strong>Durability Metrics</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-success">âš–ï¸ Activity Dur (2h, vol proxy)</h6>
                                <p class="card-text small">Activity Durability 2 jam - Konsistensi aktivitas trading
                                    (volume digunakan sebagai proxy untuk frekuensi)</p>

                                <h6 class="card-title text-success">âš–ï¸ Vol Dur (1m/5m/10m/15m/20m/30m/1h/24h)</h6>
                                <p class="card-text small">Volume Durability - Kekuatan volume pembelian dalam timeframe
                                    tertentu</p>

                                <div class="mt-2">
                                    <span class="badge bg-success me-1">67-100%</span><small>Excellent</small><br>
                                    <span class="badge bg-warning me-1">34-66%</span><small>Good</small><br>
                                    <span class="badge bg-danger me-1">0-33%</span><small>Poor</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-12">
                        <h4 class="text-info mb-3">ğŸ§  <strong>Microstructure Metrics</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <h6 class="card-title text-warning">Cohesion Index</h6>
                                        <p class="card-text small">0-100 skor yang mengukur keselarasan harga, volume beli,
                                            dan frekuensi order. Nilai tinggi berarti buyer mendominasi di banyak lapisan
                                            data secara konsisten.</p>

                                        <h6 class="card-title text-warning">Acc Vol (Aggressive Volume)</h6>
                                        <p class="card-text small">Akumulasi delta volume agresif (market buy vs sell)
                                            yang sudah disejajarkan dengan ukuran coin. Membantu melihat apakah tekanan
                                            beli/ jual bertahan lebih lama dari satu spike.</p>

                                        <h6 class="card-title text-warning">FBI (Frequency Burst Index)</h6>
                                        <p class="card-text small">Perbandingan frekuensi buy super-pendek (1m/5m)
                                            terhadap baseline 2h. >1.0 berarti sedang terjadi burst transaksi inbound.</p>

                                        <h6 class="card-title text-warning">OFSI (Order Flow Stability)</h6>
                                        <p class="card-text small">Mengukur seberapa stabil arus order agresif. Nilai tinggi
                                            berarti noise rendah dan partisipasi besar bergerak teratur.</p>

                                        <h6 class="card-title text-warning">FSI (Flow Strength Index)</h6>
                                        <p class="card-text small">Gabungan tekanan buy vs sell lintas timeframe untuk
                                            menghasilkan skor kekuatan arus modal. >70 biasanya berarti buyer dominan.</p>

                                        <h6 class="card-title text-warning">Z-Press (Z-Weighted Pressure)</h6>
                                        <p class="card-text small">Z-score (standarisasi statistik) dari delta volume dan
                                            frekuensi. Digunakan untuk mengidentifikasi pergerakan yang benar-benar
                                            signifikan, bukan sekadar karena volatilitas tinggi.</p>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="card-title text-info">TIM (Trade Imbalance Momentum)</h6>
                                        <p class="card-text small">Momentum perubahan imbalance (buy - sell) antar block
                                            waktu. Positif meningkat â†’ buyer mengambil alih, negatif tajam â†’ distribusi.</p>

                                        <h6 class="card-title text-info">CIS (Composite Institutional Signal)</h6>
                                        <p class="card-text small">Skor akhir (0-100) yang merangkum Cohesion, FSI, FBI,
                                            TIM, dan Liquidity Shock. Cocok untuk membaca positioning pemain besar.</p>

                                        <h6 class="card-title text-info">LSI (Liquidity Shock Index)</h6>
                                        <p class="card-text small">Mendeteksi lonjakan atau hilangnya likuiditas bid/ask
                                            melalui ATR + spread delta. Nilai ekstrem mengindikasikan kemungkinan
                                            breakout atau slippage besar.</p>

                                        <h6 class="card-title text-info">Range Comp (Range Compression)</h6>
                                        <p class="card-text small">Perbandingan ATR aktual dengan rentang harga real-time.
                                            Angka rendah = squeeze/kompresi (potensi ledakan), tinggi = market melebar.</p>

                                        <h6 class="card-title text-info">PFCI (Price-Flow Conflict)</h6>
                                        <p class="card-text small">Indeks konflik antara arah harga dan order flow. Nilai
                                            positif tinggi = harga turun tapi aliran buy kuat (potensi reversal). Negatif
                                            tinggi = harga naik tapi seller dominan (false breakout).</p>

                                        <div class="alert alert-dark text-light border border-warning border-opacity-50 small mb-0">
                                            <strong>Tips:</strong> padukan Cohesion + CIS untuk screening cepat,
                                            lalu cek LSI/Range Comp untuk timing entry. Gunakan PFCI sebagai filter risiko
                                            kontra-trend.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <h4 class="text-info mb-3">ğŸ“Š <strong>Volume Tab</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-info">ğŸ“Š Buy/Sell 1m, 5m, 10m, 60m, 120m</h6>
                                <p class="card-text small">Volume pembelian/penjualan dalam satuan coin</p>

                                <h6 class="card-title text-info">ğŸ“Š Total</h6>
                                <p class="card-text small">Total volume trading (Buy + Sell)</p>

                                <h6 class="card-title text-info">ğŸ’µ Avg Vol Buy/Sell</h6>
                                <p class="card-text small">Rata-rata volume trading per periode waktu</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-12">
                        <h4 class="text-info mb-3">ğŸ¯ <strong>Recommendation Algorithm</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <h6 class="text-success">ğŸŸ¢ BUY (â‰¥60% confidence)</h6>
                                        <ul class="small">
                                            <li>Harga dekat level Low (Price Pos â‰¤33%)</li>
                                            <li>Momentum harga turun signifikan (<-5%)< /li>
                                            <li>Volume Durability tinggi (â‰¥67%)</li>
                                            <li>Activity Durability tinggi (vol proxy) (â‰¥67%)</li>
                                            <li><strong>Volume Buy 2x > Volume Sell (ratio >2.0)</strong></li>
                                        </ul>
                                    </div>
                                    <div class="col-md-4">
                                        <h6 class="text-danger">ğŸ”´ SELL (â‰¥60% confidence)</h6>
                                        <ul class="small">
                                            <li>Harga dekat level High (Price Pos â‰¥67%)</li>
                                            <li>Momentum harga naik signifikan (>5%)</li>
                                            <li>Volume Durability rendah (â‰¤33%)</li>
                                            <li>Activity Durability rendah (vol proxy) (â‰¤33%)</li>
                                            <li><strong>Volume Sell 2x > Volume Buy (ratio <0.5)< /strong>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-4">
                                        <h6 class="text-warning">ğŸŸ¡ HOLD (<60% confidence)</h6>
                                                <ul class="small">
                                                    <li>Kondisi pasar netral/mixed</li>
                                                    <li>Tidak ada sinyal kuat BUY atau SELL</li>
                                                    <li>Perlu monitoring lebih lanjut</li>
                                                </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-12">
                        <h4 class="text-info mb-3">âš–ï¸ <strong>Faktor Rekomendasi & Bobot</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="text-primary">ğŸ“ Posisi Harga (25%)</h6>
                                        <p class="small mb-2">Posisi harga saat ini dalam range High-Low</p>

                                        <h6 class="text-primary">ğŸ“ˆ Momentum Harga (15%)</h6>
                                        <p class="small mb-2">Perubahan persentase harga terkini</p>

                                        <h6 class="text-primary">ğŸ’¹ Durabilitas Volume 2h (12%)</h6>
                                        <p class="small mb-2">Konsistensi volume beli dalam 2 jam</p>

                                        <h6 class="text-primary">ğŸ”„ Durabilitas Frekuensi 2h (12%)</h6>
                                        <p class="small mb-2">Konsistensi frekuensi transaksi beli</p>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-success">ğŸ“Š Rasio Volume Buy/Sell (25%)</h6>
                                        <p class="small mb-2"><strong>FAKTOR PENTING:</strong> Perbandingan volume beli
                                            vs jual</p>

                                        <h6 class="text-primary">ğŸ“… Durabilitas 24h (8%)</h6>
                                        <p class="small mb-2">Konsistensi volume dalam 24 jam</p>

                                        <h6 class="text-primary">âš¡ Momentum vs Rata-rata (3%)</h6>
                                        <p class="small mb-2">Volume terkini vs rata-rata historis</p>

                                        <div class="alert alert-info small mt-3">
                                            <strong>ğŸ’¡ Update:</strong> Bobot Volume Ratio dinaikkan dari 10% ke 25%
                                            karena lebih mencerminkan tekanan beli/jual sesungguhnya
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-6">
                        <h4 class="text-info mb-3">ğŸ“Š <strong>Data Lainnya</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-info">ğŸ’µ Total Vol</h6>
                                <p class="card-text small">Total volume dalam fiat currency</p>

                                <h6 class="card-title text-info">â° Update</h6>
                                <p class="card-text small">Waktu terakhir data diupdate</p>

                                <h6 class="card-title text-info">ğŸ“ˆ Activity Buy/Sell (2h, vol proxy)</h6>
                                <p class="card-text small">Aktivitas buy/sell dalam 2 jam terakhir (volume digunakan
                                    sebagai proxy untuk frekuensi)</p>

                                <h6 class="card-title text-info">ğŸ“Š Vol Buy/Sell (2h)</h6>
                                <p class="card-text small">Volume buy/sell dalam 2 jam terakhir</p>

                                <h6 id="volRatioSection" class="card-title text-success">ğŸ“Š Vol Ratio %</h6>
                                <div class="card-text small">
                                    <strong>Rasio Volume Buy vs Sell dalam skala 100%</strong><br>
                                    <strong>Formula:</strong> (Volume Buy Ã· Volume Sell) Ã— 100%<br><br>

                                    <strong>ğŸ“ˆ Interpretasi:</strong><br>
                                    â€¢ <strong>500%+</strong>: Ekstrem bullish - Buy volume 5x lebih besar<br>
                                    â€¢ <strong>200-500%</strong>: Sangat bullish - Buy volume 2-5x lebih besar<br>
                                    â€¢ <strong>150-200%</strong>: Bullish moderat - Buy volume 1.5-2x lebih besar<br>
                                    â€¢ <strong>80-150%</strong>: Sedikit bullish - Buy volume lebih dominan<br>
                                    â€¢ <strong>50-80%</strong>: Netral - Rasio seimbang<br>
                                    â€¢ <strong>20-50%</strong>: Bearish moderat - Sell volume lebih dominan<br>
                                    â€¢ <strong>0-20%</strong>: Sangat bearish - Sell volume mendominasi<br><br>

                                    <strong>ğŸ¯ Trading Signals:</strong><br>
                                    â€¢ <strong>ğŸŸ¢ >200%</strong>: Strong BUY signal - Institutional buying<br>
                                    â€¢ <strong>ğŸŸ¡ 50-200%</strong>: HOLD - Market balance<br>
                                    â€¢ <strong>ğŸ”´ <50%< /strong>: Strong SELL signal - Distribution phase<br><br>

                                            <strong>âš ï¸ Special Cases:</strong><br>
                                            â€¢ <strong>999%</strong>: Only BUY volume (no SELL)<br>
                                            â€¢ <strong>0%</strong>: Only SELL volume (no BUY)<br>
                                            â€¢ <strong>100%</strong>: Perfect balance<br><br>

                                            <strong>ğŸ“Š Data Source:</strong> count_VOL_minute_120_buy vs
                                            count_VOL_minute_120_sell
                                </div>

                                <h6 class="card-title text-info mt-3">ğŸ“Š Vol Buy/Sell (24h)</h6>
                                <p class="card-text small"><strong>Volume buy/sell dalam 24 jam terakhir</strong><br>
                                    Berguna untuk melihat tren jangka panjang dan perbandingan dengan volume 2 jam<br>
                                    <strong>Data Source:</strong> count_VOL_minute_1440_buy vs
                                    count_VOL_minute_1440_sell
                                </p>

                                <h6 class="card-title text-warning mt-3">ğŸ¯ Dampak pada Rekomendasi</h6>
                                <div class="card-text small">
                                    <strong>Volume Ratio mempengaruhi algoritma rekomendasi dengan bobot
                                        25%:</strong><br>
                                    <strong>Menggunakan data 2 jam terakhir untuk sinyal real-time</strong><br><br>

                                    <strong>ğŸ“ˆ BUY Signals Enhanced:</strong><br>
                                    â€¢ Ratio >200% (+25 poin BUY)<br>
                                    â€¢ Ratio >150% (+15 poin BUY)<br><br>

                                    <strong>ğŸ“‰ SELL Signals Enhanced:</strong><br>
                                    â€¢ Ratio <50% (+25 poin SELL)<br>
                                        â€¢ Ratio <67% (+15 poin SELL)<br><br>

                                            <strong>ğŸ’¡ Mengapa 2 Jam?</strong><br>
                                            Volume 2 jam memberikan sinyal yang lebih timely dan relevant untuk trading
                                            HFT<br>
                                            Volume 24 jam lebih cocok untuk analisis tren jangka panjang<br><br>

                                            <strong>âš¡ Real-time Advantage:</strong><br>
                                            Volume ratio memberikan sinyal lebih awal daripada perubahan harga karena
                                            mencerminkan intent pasar sebelum harga bergerak signifikan.
                                </div>

                                <h6 class="card-title text-info mt-3">ğŸ“š Cara Menggunakan Vol Ratio %</h6>
                                <div class="card-text small">
                                    <strong>ğŸ”¥ Scalping Strategy:</strong><br>
                                    â€¢ Cari ratio >300% untuk entry BUY<br>
                                    â€¢ Exit ketika ratio turun ke <150%<br>
                                        â€¢ Stop loss jika ratio <50%<br><br>

                                            <strong>ğŸ“Š Swing Trading:</strong><br>
                                            â€¢ Monitor perubahan ratio harian<br>
                                            â€¢ Konfirmasi dengan durability metrics<br>
                                            â€¢ Gunakan sebagai filter untuk entry/exit<br><br>

                                            <strong>âš ï¸ Risk Management:</strong><br>
                                            â€¢ Jangan trading melawan ratio ekstrem<br>
                                            â€¢ Ratio >500% bisa berarti overbought<br>
                                            â€¢ Ratio <20% bisa berarti oversold<br><br>

                                                <strong>ğŸ”„ Market Context:</strong><br>
                                                â€¢ Bandingkan dengan rata-rata historis<br>
                                                â€¢ Perhatikan volume total bersamaan<br>
                                                â€¢ Kombinasikan dengan price action<br><br>

                                                <strong>ğŸ’¡ Pro Tips:</strong><br>
                                                â€¢ Ratio mendadak >400% = Institutional buying<br>
                                                â€¢ Ratio konsisten >200% = Strong uptrend<br>
                                                â€¢ Ratio turun ke <100%=Warning signal<br>
                                                    â€¢ Ratio <30%=Potential reversal zone </div>

                                                        <h6 class="card-title text-primary mt-3">ğŸ”— Hubungan dengan
                                                            Indikator Lain</h6>
                                                        <div class="card-text small">
                                                            <strong>ğŸ“ˆ Dengan Price Position:</strong><br>
                                                            â€¢ Ratio >200% + Price Pos >67% = Overbought<br>
                                                            â€¢ Ratio <50% + Price Pos <33%=Oversold<br>
                                                                â€¢ Ratio >150% + Price Pos <50%=Accumulation<br><br>

                                                                    <strong>ğŸ’¹ Dengan Durability:</strong><br>
                                                                    â€¢ Ratio >200% + Durability >67% = Strong
                                                                    conviction<br>
                                                                    â€¢ Ratio >150% + Durability <33%=Weak momentum<br>
                                                                        â€¢ Ratio <50% + Durability>67% =
                                                                            Distribution<br><br>

                                                                            <strong>ğŸ“Š Dengan Volume Total:</strong><br>
                                                                            â€¢ High ratio + High volume = Institutional
                                                                            interest<br>
                                                                            â€¢ High ratio + Low volume = Retail
                                                                            buying<br>
                                                                            â€¢ Low ratio + High volume = Institutional
                                                                            selling<br><br>

                                                                            <strong>âš¡ Dengan Momentum:</strong><br>
                                                                            â€¢ Ratio >200% + Positive change = Bullish
                                                                            confirmation<br>
                                                                            â€¢ Ratio <50% + Negative change=Bearish
                                                                                confirmation<br>
                                                                                â€¢ Ratio neutral + High momentum =
                                                                                Short-term move<br><br>

                                                                                <strong>ğŸ¯ Best
                                                                                    Combinations:</strong><br>
                                                                                â€¢ Ratio >200% + Durability >67% + Price
                                                                                Pos <50%=STRONG BUY<br>
                                                                                    â€¢ Ratio <50% + Durability>67% +
                                                                                        Price Pos >50% = STRONG SELL
                                                        </div>

                                                        <h6 class="card-title text-danger mt-3">ğŸ“– Studi Kasus Volume
                                                            Ratio</h6>
                                                        <div class="card-text small">
                                                            <strong>ğŸ“ˆ Kasus 1 - Pump Detection:</strong><br>
                                                            Ratio tiba-tiba naik dari 80% ke 450% dalam 5 menit<br>
                                                            Durability turun dari 75% ke 25%<br>
                                                            <strong>Signal:</strong> Artificial pump - jangan
                                                            ikut<br><br>

                                                            <strong>ğŸ“‰ Kasus 2 - Institutional
                                                                Accumulation:</strong><br>
                                                            Ratio konsisten 180-220% selama 2 jam<br>
                                                            Durability stabil di 70-80%<br>
                                                            Volume total meningkat<br>
                                                            <strong>Signal:</strong> Smart money buying - ikuti
                                                            trend<br><br>

                                                            <strong>âš¡ Kasus 3 - Reversal Signal:</strong><br>
                                                            Ratio turun dari 250% ke 45% dalam 15 menit<br>
                                                            Price position masih di 70%<br>
                                                            <strong>Signal:</strong> Momentum shift - exit long
                                                            positions<br><br>

                                                            <strong>ğŸ”„ Kasus 4 - Sideways Market:</strong><br>
                                                            Ratio berfluktuasi 90-110% selama berjam-jam<br>
                                                            Durability rendah di semua timeframe<br>
                                                            <strong>Signal:</strong> Consolidation - tunggu
                                                            breakout<br><br>

                                                            <strong>ğŸ’¥ Kasus 5 - Panic Selling:</strong><br>
                                                            Ratio turun drastis ke 15% dalam waktu singkat<br>
                                                            Durability melonjak ke 85%<br>
                                                            <strong>Signal:</strong> Oversold condition - potential
                                                            bounce<br><br>

                                                            <strong>ğŸ¯ Lesson Learned:</strong><br>
                                                            Volume ratio bukan indikator standalone. Selalu konfirmasi
                                                            dengan durability, price position, dan volume total untuk
                                                            sinyal yang lebih akurat.
                                                        </div>

                                                        <h6 class="card-title text-info mt-3">âš ï¸ Troubleshooting &
                                                            Common Mistakes</h6>
                                                        <div class="card-text small">
                                                            <strong>ğŸš« Jangan Salah Interpretasi:</strong><br>
                                                            â€¢ Ratio 300% bukan berarti harga akan naik 3x<br>
                                                            â€¢ Ratio ekstrem bisa berarti thin liquidity<br>
                                                            â€¢ Ratio 100% bukan berarti market netral<br><br>

                                                            <strong>ğŸ” False Signals:</strong><br>
                                                            â€¢ Market maker manipulation<br>
                                                            â€¢ Low volume periods<br>
                                                            â€¢ News-driven spikes<br>
                                                            â€¢ Coin listing effects<br><br>

                                                            <strong>ğŸ“Š Validation Steps:</strong><br>
                                                            1. Check volume total (minimal threshold)<br>
                                                            2. Verify durability consistency<br>
                                                            3. Confirm price position alignment<br>
                                                            4. Look for multi-timeframe confirmation<br>
                                                            5. Consider market context<br><br>

                                                            <strong>â° Time-based Considerations:</strong><br>
                                                            â€¢ Asian session: Lower volume, higher volatility<br>
                                                            â€¢ US session: Higher volume, more reliable signals<br>
                                                            â€¢ Weekend: Thin liquidity, unreliable ratios<br>
                                                            â€¢ Major news: Extreme ratios, high risk<br><br>

                                                            <strong>ğŸª Market Manipulation Signs:</strong><br>
                                                            â€¢ Ratio changes >500% in <5 minutes<br>
                                                                â€¢ Durability drops while ratio spikes<br>
                                                                â€¢ Volume total doesn't support the ratio<br>
                                                                â€¢ Opposite signals across timeframes
                                                        </div>

                                                        <h6 class="card-title text-light mt-3">ğŸ“ˆ Monitoring &
                                                            Development Over Time</h6>
                                                        <div class="card-text small">
                                                            <strong>ğŸ“Š Historical Baseline:</strong><br>
                                                            â€¢ Track ratio selama 24-48 jam untuk baseline<br>
                                                            â€¢ Identifikasi level support/resistance ratio<br>
                                                            â€¢ Catat pola ratio pada timeframe berbeda<br><br>

                                                            <strong>ğŸ”„ Ratio Evolution:</strong><br>
                                                            â€¢ Monitor perubahan ratio per 5-15 menit<br>
                                                            â€¢ Cari pola: rising/falling/consolidating<br>
                                                            â€¢ Bandingkan dengan volume total trend<br><br>

                                                            <strong>ğŸ¯ Alert Setup:</strong><br>
                                                            â€¢ Alert ketika ratio >300% (strong buy)<br>
                                                            â€¢ Alert ketika ratio <30% (strong sell)<br>
                                                                â€¢ Alert ketika ratio crosses 100%<br><br>

                                                                <strong>ğŸ“± Mobile Monitoring:</strong><br>
                                                                â€¢ Focus pada ratio ekstrem (>250% atau <40%)<br>
                                                                    â€¢ Monitor 2-3 coin favorit saja<br>
                                                                    â€¢ Set notifikasi untuk sinyal penting<br><br>

                                                                    <strong>ğŸ§  Learning Process:</strong><br>
                                                                    â€¢ Backtest ratio signals pada historical data<br>
                                                                    â€¢ Catat hasil trading berdasarkan ratio<br>
                                                                    â€¢ Adjust threshold berdasarkan pengalaman<br>
                                                                    â€¢ Combine dengan indikator favorit Anda<br><br>

                                                                    <strong>ğŸš€ Advanced Usage:</strong><br>
                                                                    â€¢ Create ratio-based trading bots<br>
                                                                    â€¢ Develop ratio divergence strategies<br>
                                                                    â€¢ Use ratio for risk management<br>
                                                                    â€¢ Integrate dengan portfolio management
                                                        </div>

                                                        <div class="alert alert-success small mt-3">
                                                            <strong>ğŸ’¡ Kesimpulan Volume Ratio %:</strong><br>
                                                            Volume Ratio % adalah indikator fundamental yang menunjukkan
                                                            arah aliran uang sesungguhnya di pasar crypto. Dengan bobot
                                                            25% dalam algoritma rekomendasi, metric ini menjadi salah
                                                            satu faktor terpenting untuk mengidentifikasi tren pasar
                                                            yang sebenarnya. Gunakan dengan bijak, selalu konfirmasi
                                                            dengan indikator lain, dan ingat bahwa tidak ada indikator
                                                            yang 100% akurat - risk management tetap yang utama!
                                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <h4 class="text-info mb-3">ğŸ¨ <strong>Color Coding</strong></h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-success">ğŸŸ¢ Green (Excellent)</h6>
                                <p class="card-text small">67-100% - Kondisi sangat baik</p>

                                <h6 class="card-title text-warning">ğŸŸ¡ Yellow (Good)</h6>
                                <p class="card-text small">34-66% - Kondisi cukup baik</p>

                                <h6 class="card-title text-danger">ğŸ”´ Red (Poor)</h6>
                                <p class="card-text small">0-33% - Kondisi kurang baik</p>

                                <h6 class="card-title text-success">ğŸŸ¢ BUY Recommendation</h6>
                                <p class="card-text small">Sinyal beli dengan confidence â‰¥60%</p>

                                <h6 class="card-title text-danger">ğŸ”´ SELL Recommendation</h6>
                                <p class="card-text small">Sinyal jual dengan confidence â‰¥60%</p>

                                <h6 class="card-title text-warning">ğŸŸ¡ HOLD Recommendation</h6>
                                <p class="card-text small">Tunggu dengan confidence <60%< /p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-12">
                        <div class="alert alert-info bg-dark text-light border-info">
                            <h5>ğŸ’¡ <strong>Tips Penggunaan:</strong></h5>
                            <ul class="mb-0">
                                <li><strong>Sorting:</strong> Klik header kolom untuk mengurutkan data</li>
                                <li><strong>Filtering:</strong> Gunakan search box untuk mencari coin tertentu</li>
                                <li><strong>Row Limit:</strong> Atur jumlah baris yang ditampilkan (default: 20)</li>
                                <li><strong>Real-time:</strong> Data diperbarui secara otomatis via WebSocket</li>
                                <li><strong>Recommendation:</strong> Gunakan sebagai panduan, bukan keputusan final</li>
                                <li><strong>Risk Management:</strong> Selalu gunakan stop-loss dan position sizing</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Quick access: Open Recs tab directly under Tips Penggunaan -->
                <div class="row mt-2">
                    <div class="col-md-12 text-center">
                        <button id="openRecsBtn" class="btn btn-sm btn-outline-primary">Open Recs
                            (Recommendations)</button>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="signalLab" role="tabpanel">
                <div class="card bg-dark text-light mb-3">
                    <div class="card-body">
                        <div class="row g-3 align-items-end">
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Coin</label>
                                <select id="signalLabCoinSelect"
                                    class="form-select form-select-sm bg-dark text-light border-secondary"></select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Timeframe</label>
                                <select id="signalLabTfSelect"
                                    class="form-select form-select-sm bg-dark text-light border-secondary">
                                    <option value="1m">1m</option>
                                    <option value="5m">5m</option>
                                    <option value="10m">10m</option>
                                    <option value="30m">30m</option>
                                    <option value="60m">60m</option>
                                    <option value="120m" selected>120m</option>
                                    <option value="24h">24h</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Status</label>
                                <div id="signalLabStatus" class="fw-bold">-</div>
                            </div>
                        </div>
                        <div id="signalLabPane" class="mt-3 small text-muted">
                            <p class="mb-0">Select a coin to see the multi-factor recommendation breakdown.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="backtest" role="tabpanel">
                <div class="card bg-dark text-light mb-3">
                    <div class="card-body">
                        <div class="row g-3 align-items-end">
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Coin</label>
                                <select id="backtestCoinSelect"
                                    class="form-select form-select-sm bg-dark text-light border-secondary"></select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Samples Used</label>
                                <div id="backtestSampleCount" class="fw-bold">-</div>
                            </div>
                            <div class="col-md-4 text-end">
                                <small class="text-muted">Based on recommendation log & local history</small>
                            </div>
                        </div>
                        <div id="backtestPane" class="mt-3 small text-muted">
                            <p class="mb-0">Waiting for recommendation historyâ€¦</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="risk" role="tabpanel">
                <div class="card bg-dark text-light mb-3">
                    <div class="card-body">
                        <div class="row g-3 align-items-end">
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Coin</label>
                                <select id="riskCoinSelect"
                                    class="form-select form-select-sm bg-dark text-light border-secondary"></select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-muted">Lookback</label>
                                <select id="riskLookbackSelect"
                                    class="form-select form-select-sm bg-dark text-light border-secondary">
                                    <option value="50">Last 50 pts</option>
                                    <option value="100" selected>Last 100 pts</option>
                                    <option value="200">Last 200 pts</option>
                                </select>
                            </div>
                            <div class="col-md-4 text-end">
                                <small class="text-muted">ATR, realized volatility, drawdowns</small>
                            </div>
                        </div>
                        <div id="riskPane" class="mt-3 small text-muted">
                            <p class="mb-0">Waiting for historyâ€¦</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="events" role="tabpanel">
                <div class="card bg-dark text-light mb-3">
                    <div class="card-body">
                        <h5 class="text-info">ğŸ“… Event Watch</h5>
                        <p class="small text-muted">Combines rule-based alerts, sharp insights, and spike detections
                            logged locally.</p>
                        <div id="eventPane" class="mt-3 small text-muted">
                            <p class="mb-0">No events yet.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="alerts" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <h4 class="text-info">ğŸ”” Alerts</h4>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body">
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="enableAlertsToggle">
                                    <label class="form-check-label" for="enableAlertsToggle">ğŸ”” Enable Alerts</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="enableSoundToggle">
                                    <label class="form-check-label" for="enableSoundToggle">ğŸ”Š Sound Alerts</label>
                                </div>
                                <div class="input-group input-group-sm mt-2">
                                    <input type="text" id="alertWebhookUrl" class="form-control"
                                        placeholder="Webhook URL (optional)">
                                    <button class="btn btn-outline-secondary" id="alertWebhookTest">Test</button>
                                </div>
                                <div class="form-check form-switch mt-2">
                                    <input class="form-check-input" type="checkbox" id="persistHistoryToggleAlt">
                                    <label class="form-check-label" for="persistHistoryToggleAlt">ğŸ’¾ Persist History
                                        (LocalStorage) â€” control</label>
                                </div>
                                <div class="form-text small text-muted mt-2">Alerts appear as a banner and can send
                                    webhooks when configured.</div>
                                <div id="alertsListContainer" class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-1">
                                        <h6 class="small text-muted mb-0">Recent Alerts</h6>
                                        <div>
                                            <button id="clearAlertsBtn"
                                                class="btn btn-sm btn-outline-danger">Clear</button>
                                        </div>
                                    </div>
                                    <div id="alertsList" class="list-group list-group-flush"
                                        style="max-height:240px;overflow:auto;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="alertRulesNotesColumn">
                        <h6 class="text-success">Alert Rules & Notes</h6>
                        <div class="card bg-dark text-light mb-3">
                            <div class="card-body small">
                                <p>â€¢ Alert when Vol Ratio % (2h) &gt; 300% (strong buy)</p>
                                <p>â€¢ Alert when Vol Ratio % (2h) &lt; 30% (strong sell)</p>
                                <p>â€¢ Alert when Vol Ratio crosses 100%</p>
                                <p class="mt-2 text-muted">Use webhook test to verify delivery. Enable sound for audible
                                    alerts.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="tab-pane fade" id="spikes" role="tabpanel">
                <div class="table-responsive">
                    <table class="table table-striped" id="spikeTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>â± Timeframe</th>
                                <th>ğŸ“Š Vol</th>
                                <th>â— Avg</th>
                                <th>âš¡ Ratio</th>
                                <th>â° Update</th>
                            </tr>
                        </thead>
                        <tbody id="spikeBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="recommendations" role="tabpanel">
                <div class="mb-2">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <div class="input-group input-group-sm" style="width:160px;">
                            <span class="input-group-text">Timeframe</span>
                            <select id="recTimeframe" class="form-select">
                                <option value="All">All</option>
                                <option value="1m">1m</option>
                                <option value="5m">5m</option>
                                <option value="10m">10m</option>
                                <option value="30m">30m</option>
                                <option value="60m">60m</option>
                                <option value="120m">120m</option>
                                <option value="24h">24h</option>
                            </select>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="useAtrRecs">
                            <label class="form-check-label small text-muted" for="useAtrRecs">Use ATR-based
                                TP/SL</label>
                        </div>
                        <div class="input-group input-group-sm" style="width:260px;">
                            <span class="input-group-text">TP% min / max</span>
                            <input type="number" id="tpMin" class="form-control" placeholder="min" value="2" step="0.1">
                            <input type="number" id="tpMax" class="form-control" placeholder="max" value="10"
                                step="0.1">
                        </div>
                        <div class="input-group input-group-sm" style="width:160px;">
                            <span class="input-group-text">SL% max</span>
                            <input type="number" id="slMax" class="form-control" placeholder="max" value="5" step="0.1">
                        </div>
                        <div class="input-group input-group-sm" style="width:200px;">
                            <span class="input-group-text">Sens</span>
                            <input type="range" id="confSensitivity" min="0" max="2" step="0.05" value="1">
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped" id="recsTable">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>â± Timeframe</th>
                                <th>ğŸ¯ Recommendation</th>
                                <th>ğŸ” Confidence</th>
                                <th>ğŸ’° Price</th>
                                <th>ğŸ¯ TP</th>
                                <th>â›” SL</th>
                            </tr>
                        </thead>
                        <tbody id="recsBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="advancedSortModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content bg-dark text-light border border-warning border-opacity-50">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title">âš™ï¸ Advanced Sort & Filter</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="small text-white-50">Susun prioritas hingga 5 kriteria sekaligus dan tambahkan filter
                        berbasis flow/durability/price position untuk mempersempit pencarian.</p>
                    <div id="advancedSortCriteriaContainer" class="mb-3"></div>
                    <button type="button" class="btn btn-sm btn-outline-info" id="addAdvancedSortRow">+ Tambah
                        Kriteria</button>
                    <div class="alert alert-dark border border-secondary small mt-3">
                        <strong>Panduan:</strong> Kriteria #1 dievaluasi terlebih dahulu. Jika nilainya sama, sistem
                        lanjut ke kriteria berikutnya. Gunakan tombol panah untuk mengubah urutan.
                    </div>
                    <hr class="border-secondary">
                    <h6 class="text-info">Filter Tambahan</h6>
                    <div class="mb-3">
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="advFilterFlowToggle">
                            <label class="form-check-label small" for="advFilterFlowToggle">Aktifkan Flow Pressure
                                filter</label>
                        </div>
                        <div id="advFilterFlowControls" class="row g-2 align-items-center mb-3 d-none">
                            <div class="col-md-4">
                                <select class="form-select form-select-sm" id="advFilterFlowMetric">
                                    <option value="vol_ratio_1m">Vol Ratio % (1m)</option>
                                    <option value="vol_ratio_5m">Vol Ratio % (5m)</option>
                                    <option value="vol_ratio_10m">Vol Ratio % (10m)</option>
                                    <option value="vol_ratio_15m">Vol Ratio % (15m)</option>
                                    <option value="vol_ratio_20m">Vol Ratio % (20m)</option>
                                    <option value="vol_ratio_30m">Vol Ratio % (30m)</option>
                                    <option value="vol_ratio_1h">Vol Ratio % (1h)</option>
                                    <option value="vol_ratio">Vol Ratio % (2h)</option>
                                    <option value="vol_ratio_24h">Vol Ratio % (24h)</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select form-select-sm" id="advFilterFlowComparator">
                                    <option value=">">&gt; Greater than</option>
                                    <option value="<">&lt; Less than</option>
                                    <option value="=">= Equal to</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <input type="number" class="form-control form-control-sm" id="advFilterFlowValue"
                                    placeholder="Value">
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="advFilterDurToggle">
                            <label class="form-check-label small" for="advFilterDurToggle">Aktifkan Durability
                                filter</label>
                        </div>
                        <div id="advFilterDurControls" class="row g-2 align-items-center mb-3 d-none">
                            <div class="col-md-4">
                                <select class="form-select form-select-sm" id="advFilterDurMetric">
                                    <option value="vol_durability_1m">Vol Durability (1m)</option>
                                    <option value="vol_durability_5m">Vol Durability (5m)</option>
                                    <option value="vol_durability_10m">Vol Durability (10m)</option>
                                    <option value="vol_durability_15m">Vol Durability (15m)</option>
                                    <option value="vol_durability_20m">Vol Durability (20m)</option>
                                    <option value="vol_durability_30m">Vol Durability (30m)</option>
                                    <option value="vol_durability_60m">Vol Durability (60m)</option>
                                    <option value="vol_durability">Vol Durability (120m)</option>
                                    <option value="vol_durability_24h">Vol Durability (24h)</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select form-select-sm" id="advFilterDurComparator">
                                    <option value=">">&gt; Greater than</option>
                                    <option value="<">&lt; Less than</option>
                                    <option value="=">= Equal to</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <input type="number" class="form-control form-control-sm" id="advFilterDurValue"
                                    placeholder="Value">
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="advFilterPriceToggle">
                            <label class="form-check-label small" for="advFilterPriceToggle">Aktifkan Price Position
                                window</label>
                        </div>
                        <div id="advFilterPriceControls" class="row g-2 align-items-center d-none">
                            <div class="col-md-6">
                                <div class="input-group input-group-sm">
                                    <span class="input-group-text">Min %</span>
                                    <input type="number" class="form-control" id="advFilterPriceMin" min="0"
                                        max="100" placeholder="0-100">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm">
                                    <span class="input-group-text">Max %</span>
                                    <input type="number" class="form-control" id="advFilterPriceMax" min="0"
                                        max="100" placeholder="0-100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-sm btn-outline-secondary" id="clearAdvancedSortBtn">
                        Reset
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-sm btn-warning text-dark" id="applyAdvancedSort">Apply</button>
                </div>
            </div>
        </div>
    </div>
<!-- Hidden Alerts Modal -->
    <div class="modal fade" id="hiddenAlertsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title">Hidden Alerts</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body" id="hiddenAlertsModalBody" style="max-height:60vh;overflow:auto;"></div>
                <div class="modal-footer">
                    <button type="button" id="restoreHiddenAsBanners" class="btn btn-sm btn-outline-primary">Show as
                        banners</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary"
                        data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/formulas/math-formulas.js"></script>
    <script src="js/formulas/analytics-formulas.js"></script>
    <script src="websocket-example.js"></script>
</body>

</html>
